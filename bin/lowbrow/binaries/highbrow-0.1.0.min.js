!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){const i={scale:1,spacing:0};t.exports=class{constructor(t,e){this._config=Object.assign({},t),this._parent=e,this._scale=this._getConfigValueOrDefault("scale"),this._origin=this._getConfigValueOrDefault("origin"),this._spacing=this._getConfigValueOrDefault("spacing")}_getConfigValueOrDefault(t){let e=i[t];if(this._config.hasOwnProperty(t)&&(e=this._config[t]),void 0==e)throw new Error("Cannot create Renderable without "+t);return e}_applyScale(t){let e=this.getScale();return{x:t.x*e,y:t.y*e,z:t.z*e}}getConfig(){return this._config}getDimensions(){throw new Error("Renderable Lowbrow objects must provide getDimensions()")}getOrigin(){return Object.assign({},this._origin)}setScale(t){this._scale=t,this.getChildren().length&&this.getChildren().forEach(e=>{e.setScale(t)})}getScale(){return this._scale}getSpacing(){return this._spacing}getName(){return this._config.name}getParent(){return this._parent}getChildren(){throw new Error("Renderable Lowbrow objects must provide getChildren()")}getChildByName(t){return this.getChildren().find(e=>e.getName()==t)}toString(t=!1){let e=`${this.constructor.name} ${this.getName()}`,i=this.getChildren();if(i.length)for(let n of i)e+="\t"+n.toString(t).split("\n").map(t=>"\n\t"+t).join("");return e}}},function(t,e){t.exports={NeuronState:{inactive:"inactive",active:"active",depolarized:"depolarized"},MiniColumnState:{inactive:"inactive",active:"active"},HtmLinkType:{apical:"apical",distal:"distal",proximal:"proximal"}}},function(t,e,i){const n=i(0),r=i(3);t.exports=class extends n{constructor(t,e){super(t,e),this._corticalColumns=this._config.corticalColumns.map(t=>(t.origin=Object.assign({},this.getOrigin()),t.scale=this.getScale(),new r(t,this)))}update(t){for(let e of this.getConfig().corticalColumns){let i=this.getChildByName(e.name),n=t[e.name];i.update(n)}}getChildren(){return this.getCorticalColumns()}getCorticalColumns(){return this._corticalColumns}getHtmNetworkLinks(){let t=this.getCorticalColumns().map(t=>{t.getHtmNetworkLinks()});return[].concat(...t)}}},function(t,e,i){const n=i(0),r=i(5);t.exports=class extends n{constructor(t,e){super(t,e),this._buildColumn()}_buildColumn(){this.getOrigin();let t=this.getScale(),e=[];this._config.layers.slice().reverse().map((i,n)=>{let s=Object.assign({},i);void 0==s.scale&&(s.scale=t),s.origin=this.getOrigin(),void 0==s.spacing&&(s.spacing=t/10,s.spacing<1&&(s.spacing=0));let o=e.map(t=>{let e=t.getDimensions().y;return e*t.getScale()+(e-1)*t.getSpacing()+this.getSpacing()}).reduce((t,e)=>t+e,0);s.origin.y=s.origin.y+o;let a=new r(s,this);return e.push(a),a}),this._layers=e.reverse()}update(t){for(let e of this.getConfig().layers){let i=this.getChildByName(e.name),n=t[e.name],r=void 0,s=void 0;Array.isArray(n)?r=n:(r=n.activeCells,s=n.activeColumns),i.update(r,s)}}getChildren(){return this.getLayers()}getLayers(){return this._layers}getHtmNetworkLinks(){let t=this.getCorticalColumns().map(t=>{t.getHtmNetworkLinks()});return[].concat(...t)}}},function(t,e,i){const n=i(0);t.exports=class extends n{constructor(t,e,i,n,r){super(t,e),this._from=i,this._to=n,this._type=r}getOrigin(){throw new Error("Not implemented")}getChildren(){return[]}getFrom(){return this.getParent()}getTo(){return this.getChildren()[0]}}},function(t,e,i){const n=i(0),r=i(8),s=i(1).NeuronState;i(6).times;function o(t,e,i){var n=e*i,r=0,s=0;t>=n&&(s=Math.floor(t/n));var o=t-n*s;return o>i-1&&(r=Math.floor(o/i)),{x:r,y:o-i*r,z:s}}t.exports=class extends n{constructor(t,e){if(super(t,e),void 0==t.dimensions)throw Error("Cannot create Layer without dimensions");this._dimensions=t.dimensions,this._buildLayer()}_buildLayer(){this._neurons=[];let t=this._config.neuronCount,e=this.getOrigin(),i=this.getSpacing();for(let n=0;n<t;n++){let t=o(n,this._dimensions.x,this._dimensions.y),a=this._applyScale(t),c={x:e.x+a.x+t.x*i,y:e.y+a.y+t.y*i,z:e.z+a.z+t.z*i},l=new r({name:`Neuron ${n}`,state:s.inactive,index:n,position:t,origin:c},this);this._neurons.push(l)}this._config.miniColumns}getDimensions(){return this._dimensions}update(t,e){let i=0;for(let e of this.getNeurons())t.includes(i)?e.setState(s.active):e.setState(s.inactive),i++}getChildren(){return this.getNeurons()}getNeurons(){return this._neurons}getNeuronByIndex(t){return this.getNeurons()[t]}toString(t=!1){let e=`${this.constructor.name} ${this.getName()}`;if(t){let t=this.getChildren();if(t.length)for(let i of t)e+="\t"+i.toString().split("\n").map(t=>"\n\t"+t).join("")}else e+=` contains ${this._neurons.length} neurons scaled by ${this.getScale()}`;return e}}},function(t,e){t.exports={times:t=>e=>{let i=n=>{n!==t&&(e(n),i(n+1))};return i(0)}}},function(t,e,i){const n=i(1).NeuronState,r=i(1).MiniColumnState,s=i(1).HtmLinkType,o=(i(0),i(2));i(4).HtmNetworkLink;class a{static createHtmNetwork(t){return new o(t)}static getNeuronStates(){return n}static getMiniColumnStates(){return r}static getHtmLinkTypes(){return s}}"undefined"==typeof window?t.exports=a:window.Lowbrow=a},function(t,e,i){const n=i(0),r=i(1).NeuronState;t.exports=class extends n{constructor(t,e){if(super(t,e),this._state=r.inactive,void 0==t.position)throw Error("Cannot create Neuron without position");this._position=t.position}activate(){this.setState(r.active)}deactivate(){this.setState(r.inactive)}getDimensions(){return{x:1,y:1,z:1}}getChildren(){return[]}getName(){return`${this.index} (${this.state})`}toString(){let t=this.getName(),e=this.getPosition(),i=this.getOrigin();return`${t} at position [${e.x}, ${e.y}, ${e.z}], coordinate [${i.x}, ${i.y}, ${i.z}]`}setState(t){this._state=t}getState(){return this._state}getPosition(){return this._position}getIndex(){return this.getConfig().index}}},function(t,e,i){i(1),i(6),i(0),i(5),i(4),i(3),i(2),t.exports=i(7)}]);